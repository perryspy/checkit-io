<section ng-controller="NotesController" ng-init="find()">

  <div class="list-group">
    <div ng-repeat="note in notes" class="list-group-item note">
      <div class="row">
        <div class="col-xs-1 note-checkbox">
          <input type="checkbox"
                 ng-model="note.checked"
                 ng-click="update(note)">
        </div>
        <div class="message col-xs-9"
             ng-cloak
             ng-class="{'strike text-muted': note.checked}"
             ng-dblclick="note.editing = true">
          <span ng-if="!note.editing">{{note.message}}</span>
          <span ng-if="note.editing">
            <form class="inline"
                  ng-submit="update(note)">
              <input type="text"
                     ng-model="note.message"
                     ng-blur="note.editing = false" autofocus>
            </form>
          </span>
        </div>
        <div class="right col-xs-2">
          <button class="glyphicon glyphicon-remove delete-note-button"
                  ng-click="remove(note)"></button>
        </div>
      </div> <!-- row -->
    </div> <!-- list-group-item -->
  </div>  <!-- list-group -->

  <form ng-submit="create()">
    <input type="text" class="form-control" placeholder="Add a new note" ng-model="msg">
  </form>

</section>
